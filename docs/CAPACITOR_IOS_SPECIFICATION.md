# Spark Vault - Capacitor iOS ã‚¢ãƒ—ãƒªä»•æ§˜æ›¸

Capacitorã‚’ä½¿ç”¨ã—ãŸiOSã‚¢ãƒ—ãƒªé–‹ç™ºã®å®Œå…¨ã‚¬ã‚¤ãƒ‰

---

## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [æŠ€è¡“é¸å®šç†ç”±](#æŠ€è¡“é¸å®šç†ç”±)
3. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
4. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
5. [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †](#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †)
6. [å®Ÿè£…è¨ˆç”»](#å®Ÿè£…è¨ˆç”»)
7. [iOSå›ºæœ‰æ©Ÿèƒ½](#ioså›ºæœ‰æ©Ÿèƒ½)
8. [ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤](#ãƒ“ãƒ«ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤)
9. [ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—](#ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—)

---

## ğŸ¯ æ¦‚è¦

### Capacitorã¨ã¯

**Capacitor**ã¯ã€Ionic TeamãŒé–‹ç™ºã—ãŸã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§ã™ã€‚æ—¢å­˜ã®Webã‚¢ãƒ—ãƒªï¼ˆNext.jsï¼‰ã‚’iOS/Androidã‚¢ãƒ—ãƒªã«å¤‰æ›ã§ãã¾ã™ã€‚

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›®æ¨™

- **æœ€é€Ÿã§iOSç‰ˆã‚’ãƒªãƒªãƒ¼ã‚¹**ï¼ˆ1é€±é–“ä»¥å†…ï¼‰
- **æ—¢å­˜ã®Next.jsã‚³ãƒ¼ãƒ‰ã‚’æœ€å¤§é™æ´»ç”¨**ï¼ˆ95%ä»¥ä¸Šã®å†åˆ©ç”¨ï¼‰
- **ãƒã‚¤ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹**ï¼ˆã‚«ãƒ¡ãƒ©ã€é€šçŸ¥ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãªã©ï¼‰
- **Webç‰ˆã¨ã®å®Œå…¨ãªæ©Ÿèƒ½åŒç­‰æ€§**

---

## ğŸ¤” æŠ€è¡“é¸å®šç†ç”±

### ãªãœCapacitorã‚’é¸ã¶ã®ã‹ï¼Ÿ

| è¦ç´  | Capacitor | Swift/SwiftUI | React Native | Flutter |
|------|-----------|---------------|--------------|---------|
| **é–‹ç™ºæœŸé–“** | 1é€±é–“ | 5é€±é–“ | 6-8é€±é–“ | 8-10é€±é–“ |
| **ã‚³ãƒ¼ãƒ‰å†åˆ©ç”¨** | 95% | 0% | 50% | 0% |
| **æ—¢å­˜æŠ€è¡“æ´»ç”¨** | â­â­â­ | âŒ | â­â­ | âŒ |
| **å­¦ç¿’ã‚³ã‚¹ãƒˆ** | ä½ | é«˜ | ä¸­ | é«˜ |
| **Webç‰ˆåŒæœŸ** | è‡ªå‹• | æ‰‹å‹•å®Ÿè£… | æ‰‹å‹•å®Ÿè£… | æ‰‹å‹•å®Ÿè£… |
| **ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹** | å®¹æ˜“ | é›£ | ä¸­ | é›£ |

### ãƒ¡ãƒªãƒƒãƒˆ

âœ… **æ—¢å­˜ã®Next.jsã‚¢ãƒ—ãƒªã‚’ãã®ã¾ã¾ä½¿ç”¨**
- Reactã€TypeScriptã€TailwindCSSã€shadcn/uiã‚’ãã®ã¾ã¾åˆ©ç”¨
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãƒ»UIãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ã®å®Œå…¨å†åˆ©ç”¨

âœ… **Supabaseã¨ã®å®Œå…¨äº’æ›æ€§**
- Supabase JavaScript SDKãŒãã®ã¾ã¾å‹•ä½œ
- èªè¨¼ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã™ã¹ã¦å…±é€š

âœ… **è¶…é«˜é€Ÿé–‹ç™º**
- è¨­å®šã ã‘ã§1-3æ—¥ã§iOSã‚¢ãƒ—ãƒªãŒå®Œæˆ
- ãƒ‡ãƒãƒƒã‚°ã‚‚Chrome DevToolsã§å¯èƒ½

âœ… **iOS/AndroidåŒæ™‚å¯¾å¿œ**
- 1ã¤ã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§ä¸¡ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ

âœ… **ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆã®å‰Šæ¸›**
- Webç‰ˆã‚’æ›´æ–°ã™ã‚Œã°iOSç‰ˆã‚‚è‡ªå‹•æ›´æ–°
- ãƒã‚°ä¿®æ­£ãŒ1ç®‡æ‰€ã§æ¸ˆã‚€

### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã¨å¯¾ç­–

âŒ **ãƒã‚¤ãƒ†ã‚£ãƒ–æ„ŸãŒè‹¥å¹²åŠ£ã‚‹**
â†’ å¯¾ç­–: Capacitor Pluginsã§ãƒã‚¤ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ã‚’è¿½åŠ 

âŒ **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒãƒã‚¤ãƒ†ã‚£ãƒ–ã‚ˆã‚ŠåŠ£ã‚‹**
â†’ å½±éŸ¿: Spark Vaultã¯ãƒ˜ãƒ“ãƒ¼ãªå‡¦ç†ãŒãªã„ãŸã‚å•é¡Œãªã—

âŒ **App Storeã®å¯©æŸ»**
â†’ å¯¾ç­–: WebViewã‚¢ãƒ—ãƒªã§ã‚‚å•é¡Œãªãæ‰¿èªã•ã‚Œã‚‹äº‹ä¾‹å¤šæ•°

---

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆæ—¢å­˜ï¼‰

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 14 (App Router)
- **è¨€èª**: TypeScript
- **UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: React 18
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: TailwindCSS + shadcn/ui
- **çŠ¶æ…‹ç®¡ç†**: React Context / Hooks
- **ãƒ•ã‚©ãƒ¼ãƒ **: React Hook Form + Zod

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆæ—¢å­˜ï¼‰

- **BaaS**: Supabase
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL
- **èªè¨¼**: Supabase Auth
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: Supabase Storage

### ãƒ¢ãƒã‚¤ãƒ«ï¼ˆæ–°è¦è¿½åŠ ï¼‰

- **ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ©ãƒ³ã‚¿ã‚¤ãƒ **: Capacitor 6.x
- **iOSæœ€å°ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: iOS 13.0+
- **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«**: Xcode 15+
- **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼**: npm

### Capacitorãƒ—ãƒ©ã‚°ã‚¤ãƒ³

| ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ | ç”¨é€” | å„ªå…ˆåº¦ |
|----------|------|-------|
| @capacitor/app | ã‚¢ãƒ—ãƒªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ« | å¿…é ˆ |
| @capacitor/haptics | è§¦è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ | é«˜ |
| @capacitor/status-bar | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼åˆ¶å¾¡ | é«˜ |
| @capacitor/splash-screen | ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢ | é«˜ |
| @capacitor/keyboard | ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰åˆ¶å¾¡ | é«˜ |
| @capacitor/push-notifications | ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ | ä¸­ |
| @capacitor/share | å…±æœ‰æ©Ÿèƒ½ | ä¸­ |
| @capacitor/camera | ã‚«ãƒ¡ãƒ©ã‚¢ã‚¯ã‚»ã‚¹ | ä½ |
| @capacitor/filesystem | ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ  | ä½ |

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         iOS Native Container            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      Capacitor WebView            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚     Next.js Application     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - React Components         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - TailwindCSS Styles       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Supabase Client          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Business Logic           â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚              â†•                    â”‚  â”‚
â”‚  â”‚      Capacitor Bridge             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â†•                          â”‚
â”‚     Native iOS APIs                     â”‚
â”‚  (Camera, Notifications, etc.)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†•
        Supabase Cloud
```

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
spark-vault/
â”œâ”€â”€ src/                        # Next.jsã‚¢ãƒ—ãƒªï¼ˆæ—¢å­˜ï¼‰
â”‚   â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ lib/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ public/                     # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ ios/                        # iOS Capacitorãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆæ–°è¦ï¼‰
â”‚   â”œâ”€â”€ App/
â”‚   â”‚   â”œâ”€â”€ App/
â”‚   â”‚   â”‚   â”œâ”€â”€ AppDelegate.swift
â”‚   â”‚   â”‚   â”œâ”€â”€ Info.plist
â”‚   â”‚   â”‚   â””â”€â”€ Assets.xcassets/
â”‚   â”‚   â”œâ”€â”€ App.xcodeproj
â”‚   â”‚   â””â”€â”€ Podfile
â”‚   â””â”€â”€ capacitor.config.ts
â”œâ”€â”€ android/                    # Androidãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆå°†æ¥ï¼‰
â”œâ”€â”€ capacitor.config.ts         # Capacitorè¨­å®š
â”œâ”€â”€ package.json
â””â”€â”€ docs/
    â””â”€â”€ CAPACITOR_IOS_SPECIFICATION.md  # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

---

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### å‰ææ¡ä»¶

- âœ… macOSï¼ˆå¿…é ˆï¼‰
- âœ… Xcode 15+ï¼ˆApp Storeã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼‰
- âœ… Node.js 18+
- âœ… CocoaPodsï¼ˆXcodeã®ä¾å­˜é–¢ä¿‚ç®¡ç†ï¼‰
- âœ… Apple Developer Accountï¼ˆå®Ÿæ©Ÿãƒ†ã‚¹ãƒˆãƒ»ãƒªãƒªãƒ¼ã‚¹ç”¨ï¼‰

### 1. Capacitorã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ
cd /path/to/spark-vault

# Capacitorã‚³ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install @capacitor/core @capacitor/cli

# Capacitorã‚’åˆæœŸåŒ–
npx cap init "Spark Vault" "com.ogadix.sparkvault" --web-dir=out

# iOSãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’è¿½åŠ 
npm install @capacitor/ios
npx cap add ios
```

### 2. Next.jsã®ãƒ“ãƒ«ãƒ‰è¨­å®š

`next.config.js`ã‚’ç·¨é›†ï¼š

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  output: 'export', // é™çš„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚’æœ‰åŠ¹åŒ–
  images: {
    unoptimized: true, // ç”»åƒæœ€é©åŒ–ã‚’ç„¡åŠ¹åŒ–ï¼ˆé™çš„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®ãŸã‚ï¼‰
  },
  trailingSlash: true, // URLã®æœ«å°¾ã«ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚’è¿½åŠ 
}

module.exports = nextConfig
```

### 3. Capacitorè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

`capacitor.config.ts`ã‚’ä½œæˆï¼š

```typescript
import { CapacitorConfig } from '@capacitor/cli';

const config: CapacitorConfig = {
  appId: 'com.ogadix.sparkvault',
  appName: 'Spark Vault',
  webDir: 'out',
  bundledWebRuntime: false,
  server: {
    androidScheme: 'https',
    iosScheme: 'https',
  },
  ios: {
    contentInset: 'automatic',
    scrollEnabled: true,
  },
  plugins: {
    SplashScreen: {
      launchShowDuration: 2000,
      backgroundColor: '#8b5cf6', // Spark Vaultã®ãƒ—ãƒ©ã‚¤ãƒãƒªã‚«ãƒ©ãƒ¼
      showSpinner: false,
    },
    StatusBar: {
      style: 'dark',
      backgroundColor: '#ffffff',
    },
  },
};

export default config;
```

### 4. å¿…é ˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# åŸºæœ¬ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
npm install @capacitor/app
npm install @capacitor/haptics
npm install @capacitor/keyboard
npm install @capacitor/status-bar
npm install @capacitor/splash-screen

# ã‚¢ãƒ—ãƒªæ©Ÿèƒ½æ‹¡å¼µãƒ—ãƒ©ã‚°ã‚¤ãƒ³
npm install @capacitor/push-notifications
npm install @capacitor/share
```

### 5. ãƒ“ãƒ«ãƒ‰ã¨åŒæœŸ

```bash
# Next.jsã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã‚’iOSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åŒæœŸ
npx cap sync ios

# Xcodeã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã
npx cap open ios
```

### 6. Xcodeã§ã®è¨­å®š

XcodeãŒé–‹ã„ãŸã‚‰ï¼š

1. **Teamï¼ˆé–‹ç™ºãƒãƒ¼ãƒ ï¼‰ã®è¨­å®š**
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š â†’ Signing & Capabilities
   - Team: ã‚ãªãŸã®Apple Developer Account

2. **Bundle Identifierã®ç¢ºèª**
   - `com.ogadix.sparkvault`

3. **Deployment Targetã®è¨­å®š**
   - iOS 13.0ä»¥ä¸Š

4. **ã‚¢ãƒ—ãƒªã‚¢ã‚¤ã‚³ãƒ³ã®è¿½åŠ **
   - `App/App/Assets.xcassets/AppIcon.appiconset/`ã«é…ç½®

5. **å®Ÿæ©Ÿã¾ãŸã¯ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§å®Ÿè¡Œ**
   - ä¸Šéƒ¨ã®ãƒ‡ãƒã‚¤ã‚¹é¸æŠ â†’ Runï¼ˆâŒ˜Rï¼‰

---

## ğŸ“ å®Ÿè£…è¨ˆç”»

### Phase 1: åŸºæœ¬ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆ1-2æ—¥ï¼‰

#### Day 1: ç’°å¢ƒæ§‹ç¯‰
- [x] Xcode ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- [ ] Capacitor ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»åˆæœŸåŒ–
- [ ] Next.js ãƒ“ãƒ«ãƒ‰è¨­å®šå¤‰æ›´ï¼ˆstatic exportï¼‰
- [ ] åˆå›ãƒ“ãƒ«ãƒ‰ãƒ»åŒæœŸç¢ºèª

#### Day 2: åŸºæœ¬æ©Ÿèƒ½ç¢ºèª
- [ ] iOSã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§å‹•ä½œç¢ºèª
- [ ] Supabaseæ¥ç¶šç¢ºèª
- [ ] èªè¨¼ãƒ•ãƒ­ãƒ¼å‹•ä½œç¢ºèª
- [ ] ç”»é¢é·ç§»ç¢ºèª

**æˆæœç‰©:**
- âœ… iOSä¸Šã§å‹•ä½œã™ã‚‹Spark Vault
- âœ… å…¨Webæ©Ÿèƒ½ãŒå‹•ä½œ

---

### Phase 2: iOSæœ€é©åŒ–ï¼ˆ2-3æ—¥ï¼‰

#### ãƒã‚¤ãƒ†ã‚£ãƒ–æ„Ÿã®å‘ä¸Š

**ã‚¿ã‚¹ã‚¯:**
- [ ] ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ã‚¹ã‚¯ãƒªãƒ¼ãƒ³è¿½åŠ 
- [ ] ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š
- [ ] ã‚»ãƒ¼ãƒ•ã‚¨ãƒªã‚¢ã®èª¿æ•´
- [ ] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æŒ™å‹•ã®æœ€é©åŒ–
- [ ] è§¦è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¿½åŠ 
- [ ] ã‚¹ãƒ¯ã‚¤ãƒ—ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼å¯¾å¿œ

**å®Ÿè£…ä¾‹:**

```typescript
// src/lib/capacitor-utils.ts
import { Haptics, ImpactStyle } from '@capacitor/haptics';
import { StatusBar, Style } from '@capacitor/status-bar';
import { Keyboard } from '@capacitor/keyboard';

export const capacitorUtils = {
  // è§¦è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
  async hapticImpact(style: ImpactStyle = ImpactStyle.Medium) {
    await Haptics.impact({ style });
  },

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼è¨­å®š
  async setupStatusBar() {
    await StatusBar.setStyle({ style: Style.Dark });
  },

  // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰è¡¨ç¤ºæ™‚ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
  setupKeyboard() {
    Keyboard.addListener('keyboardWillShow', (info) => {
      document.body.style.paddingBottom = `${info.keyboardHeight}px`;
    });

    Keyboard.addListener('keyboardWillHide', () => {
      document.body.style.paddingBottom = '0px';
    });
  },
};
```

**UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®èª¿æ•´:**

```typescript
// src/components/ui/button.tsx
import { capacitorUtils } from '@/lib/capacitor-utils';

export function Button({ onClick, ...props }) {
  const handleClick = async (e) => {
    // ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ—æ™‚ã«è§¦è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
    await capacitorUtils.hapticImpact();
    onClick?.(e);
  };

  return <button onClick={handleClick} {...props} />;
}
```

---

### Phase 3: iOSå›ºæœ‰æ©Ÿèƒ½ï¼ˆ2-3æ—¥ï¼‰

#### 3.1 ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥

```typescript
// src/lib/push-notifications.ts
import { PushNotifications } from '@capacitor/push-notifications';

export async function setupPushNotifications() {
  // é€šçŸ¥ã®è¨±å¯ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
  let permStatus = await PushNotifications.checkPermissions();

  if (permStatus.receive === 'prompt') {
    permStatus = await PushNotifications.requestPermissions();
  }

  if (permStatus.receive !== 'granted') {
    throw new Error('ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ãŒè¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“');
  }

  // ç™»éŒ²
  await PushNotifications.register();

  // ãƒˆãƒ¼ã‚¯ãƒ³å—ä¿¡
  PushNotifications.addListener('registration', (token) => {
    console.log('Push token: ', token.value);
    // Supabaseã«ä¿å­˜
  });

  // é€šçŸ¥å—ä¿¡
  PushNotifications.addListener('pushNotificationReceived', (notification) => {
    console.log('é€šçŸ¥å—ä¿¡: ', notification);
  });
}
```

#### 3.2 å…±æœ‰æ©Ÿèƒ½

```typescript
// src/components/idea-share-button.tsx
import { Share } from '@capacitor/share';

export function IdeaShareButton({ idea }) {
  const handleShare = async () => {
    await Share.share({
      title: idea.title,
      text: idea.content,
      url: `https://spark.ogadix.com/ideas/${idea.id}`,
      dialogTitle: 'ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å…±æœ‰',
    });
  };

  return <Button onClick={handleShare}>å…±æœ‰</Button>;
}
```

#### 3.3 ã‚¢ãƒ—ãƒªãƒãƒƒã‚¸ï¼ˆæœªèª­ã‚«ã‚¦ãƒ³ãƒˆï¼‰

```typescript
// src/lib/badge.ts
import { Capacitor } from '@capacitor/core';

export async function updateBadgeCount(count: number) {
  if (Capacitor.getPlatform() === 'ios') {
    // iOSå°‚ç”¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ç”¨
    // å°†æ¥çš„ã«å®Ÿè£…
  }
}
```

---

### Phase 4: ãƒ†ã‚¹ãƒˆãƒ»æœ€é©åŒ–ï¼ˆ1-2æ—¥ï¼‰

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- [ ] èµ·å‹•æ™‚é–“è¨ˆæ¸¬ï¼ˆç›®æ¨™: 3ç§’ä»¥å†…ï¼‰
- [ ] ãƒšãƒ¼ã‚¸é·ç§»ã®é€Ÿåº¦ç¢ºèª
- [ ] ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãƒã‚§ãƒƒã‚¯
- [ ] ãƒãƒƒãƒ†ãƒªãƒ¼æ¶ˆè²»ãƒ†ã‚¹ãƒˆ

#### UIãƒ†ã‚¹ãƒˆ
- [ ] å„ç”»é¢ã®è¡¨ç¤ºç¢ºèª
- [ ] ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã®ãƒ†ã‚¹ãƒˆ
- [ ] ç”»åƒè¡¨ç¤ºã®ç¢ºèª
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ã®ç¢ºèª

#### æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
- [ ] èªè¨¼ãƒ•ãƒ­ãƒ¼ï¼ˆã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ãƒ»ãƒ­ã‚°ã‚¤ãƒ³ï¼‰
- [ ] ã‚¢ã‚¤ãƒ‡ã‚¢ã®CRUDæ“ä½œ
- [ ] æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
- [ ] ã‚¿ã‚°ä»˜ã‘æ©Ÿèƒ½
- [ ] ãƒ‡ãƒ¼ã‚¿åŒæœŸç¢ºèª

#### ãƒ‡ãƒã‚¤ã‚¹ãƒ†ã‚¹ãƒˆ
- [ ] iPhone SEï¼ˆå°ç”»é¢ï¼‰
- [ ] iPhone 14 Proï¼ˆæ¨™æº–ï¼‰
- [ ] iPhone 14 Pro Maxï¼ˆå¤§ç”»é¢ï¼‰
- [ ] iPadï¼ˆã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼‰

---

## ğŸ“± iOSå›ºæœ‰æ©Ÿèƒ½

### 1. ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ã‚¹ã‚¯ãƒªãƒ¼ãƒ³

**ãƒ‡ã‚¶ã‚¤ãƒ³:**
- èƒŒæ™¯è‰²: `#8b5cf6`ï¼ˆSpark Vaultã®ãƒ—ãƒ©ã‚¤ãƒãƒªã‚«ãƒ©ãƒ¼ï¼‰
- ãƒ­ã‚´: ä¸­å¤®é…ç½®
- è¡¨ç¤ºæ™‚é–“: 2ç§’

**å®Ÿè£…:**

`ios/App/App/Assets.xcassets/Splash.imageset/`ã«ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»åƒã‚’é…ç½®

**å¿…è¦ãªã‚µã‚¤ã‚º:**
- 1x: 2048x2048px
- 2x: 2048x2048px
- 3x: 2048x2048px

---

### 2. ã‚¢ãƒ—ãƒªã‚¢ã‚¤ã‚³ãƒ³

**ãƒ‡ã‚¶ã‚¤ãƒ³è¦ä»¶:**
- ã‚µã‚¤ã‚º: 1024x1024px
- ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: PNGï¼ˆé€éãªã—ï¼‰
- ã‚¹ã‚¿ã‚¤ãƒ«: Spark Vaultãƒ–ãƒ©ãƒ³ãƒ‰ã«æº–æ‹ 

**é…ç½®å ´æ‰€:**
`ios/App/App/Assets.xcassets/AppIcon.appiconset/`

---

### 3. ã‚»ãƒ¼ãƒ•ã‚¨ãƒªã‚¢å¯¾å¿œ

iOSç‰¹æœ‰ã®ãƒãƒƒãƒãƒ»ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰å¯¾å¿œ

```css
/* src/app/globals.css */
@supports (padding: env(safe-area-inset-top)) {
  body {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}
```

---

### 4. ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ

Capacitorã¯è‡ªå‹•çš„ã«ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’æ¤œå‡º

```typescript
// src/hooks/use-dark-mode.ts
import { useEffect, useState } from 'react';
import { Capacitor } from '@capacitor/core';

export function useDarkMode() {
  const [isDark, setIsDark] = useState(false);

  useEffect(() => {
    if (Capacitor.isNativePlatform()) {
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
      setIsDark(prefersDark.matches);

      const listener = (e: MediaQueryListEvent) => setIsDark(e.matches);
      prefersDark.addEventListener('change', listener);

      return () => prefersDark.removeEventListener('change', listener);
    }
  }, []);

  return isDark;
}
```

---

## ğŸ—ï¸ ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤

### é–‹ç™ºãƒ“ãƒ«ãƒ‰

```bash
# Next.jsã‚’ãƒ“ãƒ«ãƒ‰
npm run build

# Capacitorã«åŒæœŸ
npx cap sync ios

# Xcodeã§é–‹ã
npx cap open ios

# Xcodeã‹ã‚‰å®Ÿæ©Ÿã¾ãŸã¯ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§å®Ÿè¡Œ
```

---

### ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰

#### 1. ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

`package.json`:
```json
{
  "version": "1.0.0"
}
```

`ios/App/App.xcodeproj/project.pbxproj`:
- Version: 1.0.0
- Build: 1

#### 2. App Storeç”¨ã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–

Xcodeã§:
1. Product â†’ Archive
2. Distribute App
3. App Store Connect
4. Upload

---

### ç¶™ç¶šçš„ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆCI/CDï¼‰

GitHub Actionsã‚’ä½¿ã£ãŸè‡ªå‹•ãƒ“ãƒ«ãƒ‰:

```yaml
# .github/workflows/ios-build.yml
name: iOS Build

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  build:
    runs-on: macos-latest

    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install dependencies
        run: npm ci

      - name: Build Next.js
        run: npm run build

      - name: Sync Capacitor
        run: npx cap sync ios

      - name: Build iOS
        run: |
          cd ios/App
          xcodebuild -workspace App.xcworkspace \
            -scheme App \
            -sdk iphoneos \
            -configuration Release \
            build
```

---

## ğŸ“Š ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Week 1: MVP ãƒªãƒªãƒ¼ã‚¹

**Day 1-2: ç’°å¢ƒæ§‹ç¯‰**
- [x] Xcode ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- [ ] Capacitor ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] åˆå›ãƒ“ãƒ«ãƒ‰æˆåŠŸ

**Day 3-4: iOSæœ€é©åŒ–**
- [ ] ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ã‚¹ã‚¯ãƒªãƒ¼ãƒ³
- [ ] ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼è¨­å®š
- [ ] è§¦è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- [ ] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æœ€é©åŒ–

**Day 5-6: ãƒ†ã‚¹ãƒˆ**
- [ ] æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ‡ãƒã‚¤ã‚¹ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

**Day 7: ãƒªãƒªãƒ¼ã‚¹æº–å‚™**
- [ ] App Store ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
- [ ] App Store Connectè¨­å®š
- [ ] TestFlight ãƒ™ãƒ¼ã‚¿é…ä¿¡

---

### Week 2-3: æ©Ÿèƒ½æ‹¡å¼µ

**è¿½åŠ æ©Ÿèƒ½:**
- [ ] ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- [ ] å…±æœ‰æ©Ÿèƒ½
- [ ] ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼ˆService Workerï¼‰
- [ ] ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å®Œå…¨å¯¾å¿œ

---

### Week 4+: Androidå±•é–‹

- [ ] Android Studioã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] Androidãƒ“ãƒ«ãƒ‰
- [ ] Google Play Consoleç™»éŒ²
- [ ] Androidç‰ˆãƒªãƒªãƒ¼ã‚¹

---

## ğŸ” ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

### 1. ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼: "Command PhaseScriptExecution failed"

**åŸå› :** CocoaPodsã®ä¾å­˜é–¢ä¿‚ã®å•é¡Œ

**è§£æ±ºç­–:**
```bash
cd ios/App
pod deintegrate
pod install
```

---

### 2. Supabaseæ¥ç¶šã‚¨ãƒ©ãƒ¼

**åŸå› :** HTTPSã§ãªã„ã€CORSã®å•é¡Œ

**è§£æ±ºç­–:**
`capacitor.config.ts`ã§`https`ã‚¹ã‚­ãƒ¼ãƒ ã‚’ä½¿ç”¨ï¼š
```typescript
server: {
  iosScheme: 'https',
}
```

---

### 3. ç”»åƒãŒè¡¨ç¤ºã•ã‚Œãªã„

**åŸå› :** Next.jsã®ç”»åƒæœ€é©åŒ–

**è§£æ±ºç­–:**
`next.config.js`:
```javascript
images: {
  unoptimized: true,
}
```

---

### 4. ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒå‹•ã‹ãªã„

**åŸå› :** SPAè¨­å®šã®ä¸è¶³

**è§£æ±ºç­–:**
`next.config.js`:
```javascript
trailingSlash: true,
```

---

## ğŸ“š å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Capacitor Documentation](https://capacitorjs.com/docs)
- [Capacitor iOS Guide](https://capacitorjs.com/docs/ios)
- [Next.js Static Export](https://nextjs.org/docs/app/building-your-application/deploying/static-exports)

### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
- [Capacitor Plugins](https://capacitorjs.com/docs/plugins)
- [Capacitor Community Plugins](https://github.com/capacitor-community)

### ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«
- [Building a Mobile App with Capacitor and Next.js](https://capacitorjs.com/blog/capacitor-nextjs)

---

## ğŸ¯ æˆåŠŸã®å®šç¾©

### MVPï¼ˆæœ€å°é™ã®è£½å“ï¼‰
- âœ… App Storeã«ãƒªãƒªãƒ¼ã‚¹
- âœ… Webç‰ˆã®å…¨æ©Ÿèƒ½ãŒå‹•ä½œ
- âœ… ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãªãå®‰å®šå‹•ä½œ
- âœ… ãƒ¬ãƒ“ãƒ¥ãƒ¼å¹³å‡4.0ä»¥ä¸Š

### ãƒ•ãƒ«ãƒªãƒªãƒ¼ã‚¹
- âœ… ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥å®Ÿè£…
- âœ… ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
- âœ… iOSå°‚ç”¨æ©Ÿèƒ½è¿½åŠ 
- âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆãƒ»å•ã„åˆã‚ã›

- **é–‹ç™ºè€…**: Gaku
- **ãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/Gaku52/spark-vault
- **Webç‰ˆ**: https://spark.ogadix.com

---

**Phase 1ã®Webç‰ˆå®Œæˆå¾Œã€ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«åŸºã¥ã„ã¦Capacitor iOSé–‹ç™ºã‚’é–‹å§‹ã—ã¾ã™ã€‚**

æœ€çµ‚æ›´æ–°: 2025-11-15
